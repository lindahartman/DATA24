<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.37">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Visualization ‚Äì DATA24</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-d37c06fde26cce7278c43b211372364c.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-81674bea0ce09368006a45d6d4084aa0.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
<style>
div.callout-challenge.callout {
  border-left-color: firebrick;
}
div.callout-challenge.callout-style-default > .callout-header {
  background-color: rgb(from firebrick r g b / 13%);
}
div.callout-challenge .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-challenge.callout-style-default .callout-icon::before, div.callout-challenge.callout-titled .callout-icon::before {
  content: 'üõ†Ô∏è';
  background-image: none;
}
div.callout-question.callout {
  border-left-color: pink;
}
div.callout-question.callout-style-default > .callout-header {
  background-color: rgb(from pink r g b / 13%);
}
div.callout-question .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-question.callout-style-default .callout-icon::before, div.callout-question.callout-titled .callout-icon::before {
  content: 'üß†';
  background-image: none;
}
</style>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./brand/LU_logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">DATA24</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./visualization.html" aria-current="page"> 
<span class="menu-text">Visualization</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./wrangling.html"> 
<span class="menu-text">Wrangling</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./pivotjoin.html"> 
<span class="menu-text">Pivots and joins</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#video-1-greenscreen-7-min" id="toc-video-1-greenscreen-7-min" class="nav-link active" data-scroll-target="#video-1-greenscreen-7-min">VIDEO 1 {greenscreen} ~ 7 min</a></li>
  <li><a href="#video-2-greenscreen-5-min" id="toc-video-2-greenscreen-5-min" class="nav-link" data-scroll-target="#video-2-greenscreen-5-min">VIDEO 2 {greenscreen} ~ 5 min</a></li>
  <li><a href="#video-3-greenscreen-10-min" id="toc-video-3-greenscreen-10-min" class="nav-link" data-scroll-target="#video-3-greenscreen-10-min">VIDEO 3 {greenscreen} ~ 10 min</a></li>
  <li><a href="#video-4-greenscreen-9-min" id="toc-video-4-greenscreen-9-min" class="nav-link" data-scroll-target="#video-4-greenscreen-9-min">VIDEO 4 {greenscreen} ~ 9 min</a></li>
  <li><a href="#video-5-greenscreen-12-min" id="toc-video-5-greenscreen-12-min" class="nav-link" data-scroll-target="#video-5-greenscreen-12-min">VIDEO 5 {greenscreen} ~ 12 min</a></li>
  <li><a href="#video-6-greenscreen-10-min" id="toc-video-6-greenscreen-10-min" class="nav-link" data-scroll-target="#video-6-greenscreen-10-min">VIDEO 6 {greenscreen} ~ 10 min</a></li>
  <li><a href="#video-7-greenscreen-7-min" id="toc-video-7-greenscreen-7-min" class="nav-link" data-scroll-target="#video-7-greenscreen-7-min">VIDEO 7 {greenscreen} ~ 7 min</a></li>
  <li><a href="#video-8-greenscreen-12-min" id="toc-video-8-greenscreen-12-min" class="nav-link" data-scroll-target="#video-8-greenscreen-12-min">VIDEO 8 {greenscreen} ~ 12 min</a></li>
  <li><a href="#video-9-greenscreen-12-min" id="toc-video-9-greenscreen-12-min" class="nav-link" data-scroll-target="#video-9-greenscreen-12-min">VIDEO 9 {greenscreen} ~ 12 min</a></li>
  <li><a href="#video-10-greenscreen-5-min" id="toc-video-10-greenscreen-5-min" class="nav-link" data-scroll-target="#video-10-greenscreen-5-min">VIDEO 10 {greenscreen} ~ 5 min</a></li>
  <li><a href="#video-11-greenscreen-12-min" id="toc-video-11-greenscreen-12-min" class="nav-link" data-scroll-target="#video-11-greenscreen-12-min">VIDEO 11 {greenscreen} ~ 12 min</a></li>
  <li><a href="#video-12-greenscreen-10-min" id="toc-video-12-greenscreen-10-min" class="nav-link" data-scroll-target="#video-12-greenscreen-10-min">VIDEO 12 {greenscreen} ~ 10 min</a></li>
  <li><a href="#video-13-greenscreen-7-min" id="toc-video-13-greenscreen-7-min" class="nav-link" data-scroll-target="#video-13-greenscreen-7-min">VIDEO 13 {greenscreen} ~ 7 min</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-page-left" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Visualization</h1>
</div>



<div class="quarto-title-meta column-page-left">

    
  
    
  </div>
  


</header>


<section id="video-1-greenscreen-7-min" class="level1">
<h1>VIDEO 1 {greenscreen} ~ 7 min</h1>
<!-- ## Welcome -->
<p>Welcome to the lesson on data visualization!</p>
<p>Data visualization is one of the most important skills in data analysis. Why? Because a well-made chart can reveal patterns, trends, and insights that might otherwise stay hidden in a spreadsheet. It‚Äôs like turning a jumble of numbers into a picture that tells a story.</p>
<p>But let‚Äôs be honest‚Äîvisualizing data can sometimes feel overwhelming. There are so many types of charts to choose from and endless options for customizing them. Scatter plots, bar graphs, heatmaps‚Äîwhat should you use? And even after you pick a plot, there are all these parameters: axis, labels, color scales, gridlines‚Ä¶ It‚Äôs easy to feel like you‚Äôre drowning in options!</p>
<p>Point-and-click tools for visualization, like those built into some software, can be helpful, but they come with their own challenges. They often overwhelm you with choices, and worse, they don‚Äôt always give you an easy way to reproduce or share your work.</p>
<p>When you create visualizations using a script instead of a mouse, you unlock an entirely new level of power. Scripting your plots means they‚Äôre reproducible. You can tweak them, reuse them, and share the code with others. It‚Äôs like building a recipe that others can follow, modify, or inspect to understand exactly how the visualization was made.</p>
<p>Now, let‚Äôs take a step back into history for a moment. In 1999, a statistician named Leland Wilkinson published a groundbreaking book called The Grammar of Graphics. Think of it like this: Just as grammar gives structure to language, Wilkinson‚Äôs framework gave structure to statistical graphics. He introduced a way to think about and construct plots systematically, rather than relying on intuition or tradition alone.</p>
<p>His ideas were revolutionary and influenced countless tools for making visualizations. One of the most famous examples is the R package <code>ggplot2</code>, created by Hadley Wickham. Wickham built on Wilkinson‚Äôs Grammar of Graphics and created what is now considered one of the most powerful and popular visualization tools in the world of data science.</p>
<p>In 2017 a passionate Python developer from Uganda by the name Hassan Kibridge ported <code>ggplot2</code> into Python. His project became known as <code>plotnine</code> and it soon became a universal success. Here‚Äôs the story of <code>plotnine</code> in his own words:</p>
<!-- ## VOICE OVER

> I discovered this "Grammar of Graphics" thing and found it elegant and powerful. So, I wanted to be able to use it in Python, my preferred programming language for data analysis. I read the key text on the subject by Leland Wilkinson and while I had a good grasp of it, translating it into a usable system would have been a huge undertaking. Hadley Wickham had done so for his doctorate and came up with ggplot2. While I was not confident enough to take this on, I felt that it was quite revolutionary and someone was going to implement it for Python.
>
> And it happened‚Äîa project came up that allowed people to seemingly make plots in Python using a grammar just like ggplot2. I started using it but soon discovered that it did not implement a grammar, it just faked one, and it broke down when you tried to make more complicated plots. Since this project was open source, I contributed to improving it. Yet to fix what was lacking grew into a complete overhaul, and this endeavor is what became Plotnine. The first release of which came out in July 2017 after about 3 years of on-and-off development.
>
> To my surprise, Plotnine has been more successful than I imagined. For it, I have twice received the Google Open Source Peer Bonus Award‚Äîa recognition from Google employees towards open source software that is essential to their work. I have helped someone who was working on a COVID-19 vaccine trial solve a small problem they had run into with Plotnine. And, there is a book or two about it.  
-->
<!-- :::{.callout-tip}
Have a look at the [full interview here](https://mode.com/blog/whos-behind-the-numbers-hassan-kibirige) as well as Hassan's [talk at the posit::conf(2023)](https://www.youtube.com/watch?v=q816IZuqVNo) in Chicago.
::: -->
<p>While the syntax of <code>plotnine</code> might feel a bit different from typical Python code, don‚Äôt worry‚Äîthere‚Äôs a reason for it! The goal is to keep the grammar intact, and that consistency makes it easy to learn and incredibly flexible to use.</p>
<p>In this lesson, we‚Äôll dive into <code>plotnine</code> and explore how it allows you to create clear, beautiful, and insightful visualizations. We‚Äôll guide you step by step so you can quickly become comfortable with its intuitive and expressive syntax.</p>
<p>So, join us on this journey into the wonderful world of data visualization. By the end, you‚Äôll be creating plots that don‚Äôt just look good but also communicate your data‚Äôs story effectively. Let‚Äôs get started!</p>
<!-- ## Libraries -->
<p>Before we dive in, let‚Äôs talk about the tools and libraries we‚Äôll be using in this lesson.</p>
<p>First up is polars, the powerful data analysis library we‚Äôll be relying on throughout the course. If you‚Äôre familiar with Python, you know it‚Äôs common practice to use shorthand or aliases when importing libraries. For polars, the standard alias is pl, so that‚Äôs what we‚Äôll use here. Anytime we call a function from polars, it will be prefixed with <code>pl.</code> ‚Äî simple and consistent.</p>
<p>Now, when it comes to our visualization library, plotnine, we‚Äôll take a slightly different approach. Instead of using a prefix, we‚Äôll import all its functions directly into our workspace. This means we‚Äôll use the from plotnine import * syntax, which essentially says, ‚ÄúHey Python, bring in everything from plotnine!‚Äù Why? Because it makes our plotting code cleaner, easier to read, and more expressive.</p>
<p>Finally, let‚Äôs talk about the dataset we‚Äôll be exploring today. It comes from the gapminder package. If you‚Äôre not familiar with Gapminder, it‚Äôs a non-profit organization founded by Hans Rosling and his children back in 2005. Their mission? To promote a better understanding of global development through data‚Äîfocusing on health, economics, and the environment.</p>
<p>The Gapminder Foundation maintains an incredible collection of statistics about the world, and this package is a small extract from their database. It‚Äôs packed with fascinating data on public health, economic development, and global welfare.</p>
<p>Hans Rosling himself is famous for his captivating TED Talk in 2007, where he used data to tell the story of global development. He spoke about life expectancy, GDP, and even the humble washing machine‚Äîand how it changed the world. If you haven‚Äôt watched that talk yet, I can‚Äôt recommend it enough. It‚Äôs a masterclass in how to make data come alive.</p>
<p>So, with our tools in hand and an inspiring dataset at our fingertips, we‚Äôre ready to start exploring and visualizing. Let‚Äôs get to it!</p>
</section>
<section id="video-2-greenscreen-5-min" class="level1">
<h1>VIDEO 2 {greenscreen} ~ 5 min</h1>
<!-- ## Data -->
<p>The dataset has been conveniently imported for us by the <code>gapminder</code> package. To get started, we can simply type <code>gapminder</code> into our console and hit Enter. When we do that, we‚Äôll see a preview of the data in the form of a table ‚Äî what we call a DataFrame. In this table, each row represents an observation, and each column represents a variable.</p>
<p>This dataset has 1,704 rows and 6 columns, so it‚Äôs fairly compact but still rich with information. Let‚Äôs walk through what each of these columns means:</p>
<ul>
<li><p><strong>country</strong>: This column lists the names of countries. If you take a look at the data, you‚Äôll notice it starts with Afghanistan at the top and ends with Zimbabwe at the bottom. It seems the data is sorted alphabetically by country.</p></li>
<li><p><strong>continent</strong>: Here, we have the names of continents. For example, Afghanistan is listed under Asia, while Zimbabwe is under Africa. Makes perfect sense.</p></li>
<li><p><strong>year</strong>: This column tells us the year of the observation. You‚Äôll notice that each country has multiple rows because data was collected at different times. The dataset starts in 1952 and progresses in 5-year increments, which gives us a nice snapshot of changes over time.</p></li>
<li><p><strong>lifeExp</strong>: This column stands for life expectancy at birth. If we look at Afghanistan in 1952, for example, the life expectancy was just 28.8 years. Let that sink in for a moment ‚Äî only 28 years! It‚Äôs a sobering reminder of the challenges some nations faced in the mid-20th century.</p></li>
<li><p><strong>pop</strong>: This column shows the population of each country. Again, looking at Afghanistan in 1952, the population was just under 8.5 million people.</p></li>
<li><p><strong>gdpPercap</strong>: Finally, this column contains the GDP per capita, expressed in US dollars. From what I understand, these figures have been adjusted for inflation, so they should be comparable across countries and over time.</p></li>
</ul>
<p>Altogether, these six columns give us a fascinating lens through which to explore global trends in health, wealth, and population growth. The dataset might look simple at first glance, but it‚Äôs packed with stories waiting to be uncovered.</p>
<p>Now that we know what we‚Äôre working with, let‚Äôs roll up our sleeves and start exploring!</p>
</section>
<section id="video-3-greenscreen-10-min" class="level1">
<h1>VIDEO 3 {greenscreen} ~ 10 min</h1>
<!-- ## First plot -->
<p>Now, it‚Äôs time to create our very first plot! Here is a question we would like to answer using <code>gapminder</code> data:</p>
<div class="callout callout-style-default callout-question callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Question
</div>
</div>
<div class="callout-body-container callout-body">
<p>Do people in rich countries live longer than people in poor countries?</p>
</div>
</div>
<p>The answer may be quite intuitive, but we will continue our investigation further</p>
<div class="callout callout-style-default callout-question callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Question
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>How does the relationship between GDP per capita and Life expectancy look like? Is this relationship linear? Non-linear?</li>
<li>Are there exceptions to the general rule (outliers)?</li>
</ul>
</div>
</div>
<p>In order to answer these questions, we will create a plot from <code>gapminder</code> data. Here‚Äôs the code we‚Äôll use. Take a moment to copy this code verbatim from your screen.</p>
<p>When writing Python code with <code>plotnine</code> ‚Äî and later when we use <code>polars</code> ‚Äî you‚Äôll notice that we often wrap our code in parentheses. This is a great habit to get into because it allows us to break our code into multiple lines without worrying about indentation.</p>
<p>Let‚Äôs walk through this step by step.</p>
<p>Inside the outer parentheses, the first thing we write is <code>ggplot</code>. This is the foundational function in <code>plotnine</code>, and it stands for <strong>Grammar of Graphics plot</strong>. Then, in parentheses again, we pass the dataset we want to use ‚Äî in this case, <code>gapminder</code>.</p>
<p>After that, we add a plus sign. The Grammar of Graphics, which <code>plotnine</code> is built on, thinks of plots as being made up of layers. The <code>+</code> sign we added tells Python that we‚Äôre adding more layers or components to our plot. Think of it as saying, ‚ÄúWait, there‚Äôs more!‚Äù</p>
<p>On the next line, we write <code>geom_point</code>. This is the function that specifies the type of layer we‚Äôre adding to our plot. In this case, it‚Äôs a point plot, which means we‚Äôll be drawing points on a graph. Without this layer, our plot would just be an empty canvas.</p>
<p>Inside the <code>geom_point</code> parentheses, we specify the argument: <code>mapping</code> followed by an <code>=</code> sign. This tells <code>plotnine</code> how we want to relate our data to the graph. AES stands for ‚Äúaesthetics‚Äù. The inside of the <code>aes</code> function defines mapping of the variables in our data to certain aesthetical properies of our graph. We‚Äôre saying, ‚ÄúTake the GDP per capita (<code>gdpPercap</code>) and map it to the x-axis, and take life expectancy (<code>lifeExp</code>) and map it to the y-axis.‚Äù Notice that the column names are enclosed in quotes ‚Äî that‚Äôs important!</p>
<p>Once you‚Äôve written the code, go ahead and hit the Run button. If everything is correct, you should see your plot appear on the screen.</p>
<p>Let‚Äôs take a moment to reflect on what we just did.</p>
<p>In our code, the first layer was the <code>ggplot</code> function, where we provided the dataset. The second layer was <code>geom_point</code>, which added points to our graph.</p>
<p>The result is a simple yet meaningful scatter plot. It shows a positive, non-linear relationship between GDP per capita on the x-axis and life expectancy on the y-axis. Does this align with what you initially expected? Or does it challenge your assumptions? Already, you can see how visualizing data helps uncover patterns and stories that might not be obvious at first glance.</p>
<p>Take your time to review the code and compare it to the plot we created. Understanding this connection ‚Äî how the code you write translates directly into what you see on the screen ‚Äî is the key to mastering data visualization.</p>
<p>In fact, the structure of most plots in <code>plotnine</code> (and its R counterpart, <code>ggplot2</code>) can be summarized with a simple template:</p>
<pre><code>ggplot(data = &lt;DATA&gt;) + 
  &lt;GEOM_FUNCTION&gt;(mapping = aes(&lt;MAPPINGS&gt;))</code></pre>
<p>This template is incredibly flexible and serves as the foundation for almost every visualization we‚Äôll create.</p>
<p>In the remainder of this lesson, we‚Äôll explore how to extend and customize this template to create a wide variety of visualizations. Each new element we add will open up even more possibilities.</p>
<p>I‚Äôll see you in the next one!</p>
</section>
<section id="video-4-greenscreen-9-min" class="level1">
<h1>VIDEO 4 {greenscreen} ~ 9 min</h1>
<!-- ## Axis -->
<p>Hello again! Ready for a challenge? I‚Äôve got a question for you:</p>
<div class="callout callout-style-default callout-challenge callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Challenge
</div>
</div>
<div class="callout-body-container callout-body">
<p>How has life expectancy changed over time?</p>
</div>
</div>
<p>Take a moment to think about it. Better yet, try answering it by modifying the code we wrote in the last lesson.</p>
<p>Here‚Äôs a quick hint before you pause the video: The <code>gapminder</code> dataset includes a column called <code>year</code>, which can go on the x-axis. Use that to tweak the code and see what you find. I‚Äôll wait right here while you try it out!</p>
<p>Pause the video now and give it a shot. See you in a moment!</p>
<!-- *...pause for effect...* -->
<p>Done? Excellent! Let‚Äôs take a look at what we‚Äôve got. Nice work! You should see a scatter plot showing life expectancy over time.</p>
<p>Hmm‚Ä¶ notice how some of the points are stacked on top of each other? That‚Äôs called overplotting, and it‚Äôs pretty common when you have a lot of data points at the same x or y values. Don‚Äôt worry‚Äîit‚Äôs easy to fix!</p>
<p>Instead of geom_point, try using geom_jitter. This will add a tiny bit of random noise to spread out the points so they‚Äôre easier to see.</p>
<p>Here‚Äôs how you do it:</p>
<p>Run this code and check out the difference. Much better, right? Now we can see the points more clearly.</p>
<p>Let‚Äôs keep going with this little game. Here‚Äôs your next challenge:</p>
<div class="callout callout-style-default callout-challenge callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Challenge
</div>
</div>
<div class="callout-body-container callout-body">
<p>Can you visualize life expectancy by continent?</p>
</div>
</div>
<p>Think about which variable should go on the x-axis this time. Which continent do you think tends to have the highest life expectancy? Modify your code and give it a shot. Pause the video, try it out, and come back when you‚Äôre ready.</p>
<!-- *...pause for effect...* -->
<p>Great job! What do we see here? Looks like life expectancy in Oceania is quite high, although there aren‚Äôt many points for that region. Europe is a close second. On the other hand, Africa seems to have the lowest life expectancy overall, judging by the density of points at the lower end of the y-axis.</p>
<p>Here‚Äôs another question: Which continent has the widest spread in life expectancy values? That‚Äôs right‚Äîit‚Äôs Asia. There‚Äôs quite a bit of variation there, which is something we‚Äôll dig into in more detail later in the course.</p>
<p>Fantastic work so far! Take a moment to review what you‚Äôve done, and I‚Äôll see you in the next section!</p>
</section>
<section id="video-5-greenscreen-12-min" class="level1">
<h1>VIDEO 5 {greenscreen} ~ 12 min</h1>
<!-- ## Aestetical mapping -->
<p>&lt;‚Ä¶Walks in, looking thoughtful‚Ä¶.&gt;</p>
<p>Oh, hey there! You know, I‚Äôve been thinking‚Äîwhat if we could combine the graphs from the last two challenges and show the relationship between not just two variables, but three?</p>
<p>Now, don‚Äôt worry‚Äîwe‚Äôre not diving into ‚Äúthree-dimensional‚Äù plots just yet. Instead, we can represent a third variable using color. Let me show you what I mean.</p>
<p>Here‚Äôs modified code that maps the continent variable to the color aesthetic:</p>
<p>Run this code and take a look.</p>
<!-- *...pause for effect...* -->
<p>What do you see? Now we can see more clearly how life expectancy has changed over time by continent. For example, the points representing Africa stay clustered near the lower end of the y-axis throughout the years, while Europe‚Äôs points are generally higher. Oceania is there too, but it‚Äôs barely noticeable because there are so few observations. Pretty cool, right?</p>
<p>Now, I‚Äôve got a question for you: What happens if we switch the mappings of continent and year? Give it a try!</p>
<!-- :::{.challenge}
Switch the mappings of continent and year in this sample code

```
(
ggplot(gapminder)+
geom_jitter(mapping = aes(x='year', y='lifeExp', color='continent'))
)
```
::: -->
<!-- *...pause for effect...* -->
<p>Done? Great! Do you still find this graph useful? Why or why not?</p>
<p>Now let‚Äôs tweak it a bit more. What if, instead of mapping color to year, we mapped it to country? Give it a try!</p>
<!-- :::{.challenge}
Map color to country in this sample code:
```
(
ggplot(gapminder)+
geom_jitter(mapping = aes(x='continent', y='lifeExp', color='year'))
)
```
::: -->
<p>What changed? How does mapping color to country differ from mapping it to year? Take a moment to think about it. What do you think is the main limitation of using the color aesthetic?</p>
<p>Alright, here‚Äôs one last challenge for this section: Can you add a splash of color to our original graph of life expectancy by GDP per capita? Let‚Äôs color the points by continent.</p>
<!-- :::{.challenge}
Color the points by continent in this sample code:
```
(
ggplot(gapminder) +
geom_point(mapping = aes(x='gdpPercap', y='lifeExp'))
)
```
::: -->
<p>Take a moment to run your code and see what you get.</p>
<!-- Pause. -->
<p>Amazing! By adding color, we can now spot trends and patterns more easily. But did you notice something else? There are a few outliers in this plot. Can you tell which continent those points belong to?</p>
<p>The points look a little crowded. But you know, you can always transform GDP per capita to a logarithmic scale for better visualization. Just add <code>scale_x_log10()</code> as an additional layer to your graph, like that:</p>
<p>You‚Äôre making fantastic progress! Well done! In the next section, we‚Äôll explore even more aesthetics that can help us tell richer stories with our data. See you there!</p>
</section>
<section id="video-6-greenscreen-10-min" class="level1">
<h1>VIDEO 6 {greenscreen} ~ 10 min</h1>
<!-- ## More aesthetics -->
<p>Hello again!</p>
<p>So far, we‚Äôve explored some powerful ways to visualize data using the x, y, and color aesthetics. With these, we‚Äôve been able to represent three variables in a single plot. Pretty amazing, right?</p>
<p>Now, let‚Äôs quickly recap what we‚Äôve learned about the color aesthetic. When we map a categorical variable like continent to color, plotnine automatically picks a distinct palette for each category. This works great when there are just a few categories, but as the number of categories grows, the colors start to blur together and lose their effectiveness.</p>
<p>On the other hand, when we map a continuous variable like year to color, we get a gradient. While individual values can be harder to pinpoint, the overall trends are beautifully highlighted by the gradient‚Äôs brightness.</p>
<p>Alright, as promised, let me introduce you to another fantastic aesthetic: size.</p>
<p>Imagine we could vary the size of the points in our graph to represent something meaningful‚Äîlike the population of a country. That would let us visualize not three, but four variables at the same time. Let‚Äôs give it a shot. Here‚Äôs the code:</p>
<p>WRun this and take a moment to appreciate the result. Isn‚Äôt it gorgeous?</p>
<p>Now we can see the journey of countries like China and India over time. Their points stand out because of their large populations. Under the logarithmic transformation of the x-axis, the relationship between GDP per capita and life expectancy starts to look more linear‚Äîbut not quite!</p>
<p>Notice the outliers on the far right? They all seem to be from Asian countries. Are these countries rich or poor? Rich, right? But their life expectancy doesn‚Äôt quite follow the trend we see in Europe or the Americas. Fascinating, isn‚Äôt it?</p>
<p>Now, let me share one more aesthetic property with you: shape.</p>
<p>Shape can be a great tool for visualizing low-cardinality categorical variables, like continent. Instead of just using circles, we can use distinct shapes for each category. This lets us pack even more information into the same graph.</p>
<p>Ready for a challenge? Let‚Äôs push the limits and visualize five dimensions in a single plot. Modify the previous example to map year to color and continent to shape. Take a moment and try it. I‚Äôll wait.</p>
<!-- :::{.challenge}
Map year to color and continent to shape in this sample code 
```
(
ggplot(gapminder)+
geom_point(mapping = aes(x='gdpPercap', y='lifeExp', color='continent', size='pop'))+
scale_x_log10()
)
```
::: -->
<!-- *...pause for effect...* -->
<p>What do you notice? Can you tell whether those Asian outliers come from small or large countries? Are they from earlier or later time periods?</p>
<p>These are the kinds of questions we can answer when we use multiple aesthetics thoughtfully. Isn‚Äôt it amazing how much information we can pack into a single visualization?</p>
<p>Fantastic work today! In the next lesson, we‚Äôll continue exploring new tools and techniques to take your visualizations even further. See you soon!</p>
</section>
<section id="video-7-greenscreen-7-min" class="level1">
<h1>VIDEO 7 {greenscreen} ~ 7 min</h1>
<!-- ## Non-data linked properties -->
<p>Welcome back!</p>
<p>So far, we‚Äôve packed a lot of information into single graphs using data-mapped aesthetics like color, size, and shape. While this approach is powerful, let‚Äôs face it‚Äîcombining too many aesthetics can make a plot feel busy and overwhelming.</p>
<p>Sometimes, less is more. A clean and simple graph, highlighting just one or two aspects of the data, can be just as insightful‚Äîand a lot easier on the eyes.</p>
<p>Now, the default style in plotnine is already quite nice, but there may come a time when you want to tweak things to better suit your storytelling. So, let‚Äôs look at how to customize graphs using non-data-linked properties‚Äîthose that aren‚Äôt mapped to a variable but instead apply globally to all points in the graph.</p>
<p>Here‚Äôs an example. What if we want all the points in our plot to be the same color, say blue? And what if we also want to adjust their size and transparency? Here‚Äôs the code to do that:</p>
<p>Go ahead, give this a try.</p>
<!-- Pause for effect. -->
<p>Beautiful, isn‚Äôt it? All the points are now blue, with a larger size and a soft transparency that makes overlapping points blend together nicely. This transparency, or alpha, helps highlight areas where the data is dense‚Äîlike shadows on a heatmap.</p>
<p>Notice something? The color, size, and alpha settings aren‚Äôt part of the aes() function. That‚Äôs because these properties aren‚Äôt mapped to any variable in the data. Instead, they‚Äôre applied uniformly to every point in the plot.</p>
<p>Let‚Äôs break it down:</p>
<ul>
<li><code>color="blue"</code>: The color is set as a character string, wrapped in quotes. You can experiment with other colors too‚Äîtry red, green, or even hex codes like ‚Äú#FF5733‚Äù.</li>
<li><code>size=2:</code> The size of the points is specified as a number, in millimeters. Increase the size to make the points larger or decrease it for smaller ones.</li>
<li><code>alpha=0.1</code>: Transparency is a decimal value between 0 and 1, where 0 is completely transparent and 1 is fully opaque.</li>
</ul>
<p>Finally, let‚Äôs talk about shapes. In plotnine, shapes are represented by numbers. For example:</p>
<ul>
<li>0 is a square,</li>
<li>1 is a circle,</li>
<li>2 is a triangle,</li>
<li>20 is a small filled circle.</li>
</ul>
<p>Here‚Äôs a challenge for you</p>
<div class="callout callout-style-default callout-challenge callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Challenge
</div>
</div>
<div class="callout-body-container callout-body">
<p>Change the shape argument in the code to explore different shapes. Try values between 0 and 25, and see how your graph changes. You‚Äôll find the full list of shapes in the plotnine documentation.</p>
</div>
</div>
<p>So, what do you think? With just a few tweaks, we‚Äôve turned our scatter plot into a clean and stylish visual. Customizing non-data-linked properties like this is a great way to emphasize certain elements of your data without overwhelming your audience.</p>
<p>In the next lesson, we‚Äôll explore even more ways to take your visualizations to the next level. See you there!</p>
</section>
<section id="video-8-greenscreen-12-min" class="level1">
<h1>VIDEO 8 {greenscreen} ~ 12 min</h1>
<!-- ## Geometrical objects -->
<p>Welcome back! Let‚Äôs dive into another exciting aspect of creating visualizations in plotnine: geometrical objects, or geom_ functions.</p>
<p>These geom_ functions are the building blocks of your plots, allowing you to highlight different aspects of your data. By swapping or combining geom_ layers, you can tell entirely new stories with the same dataset.</p>
<p>For example, what if we wanted to show the development of life expectancy over time for each country? We could use geom_line() to connect individual data points belonging to the same country.</p>
<p>Here‚Äôs the code to do just that:</p>
<p>Note that we have a new aesthetics called <code>group</code>. It indicates which points need to be connected together to for a line. Here we are drawing one line per country. Take a moment to run this and see what you get.</p>
<!-- Pause for effect. -->
<p>Do you see it? Each country now has its own line, colored by continent. It‚Äôs fascinating to watch life expectancy trends unfold over time. But look closely‚Äîyou might notice some sharp, sudden drops for certain countries. What do you think caused these declines? Wars? Epidemics?</p>
<p>We‚Äôll learn how to zoom in on these tragic moments and identify the affected countries later in the course, once we‚Äôve mastered some data wrangling with Polars. For now, make a mental note of this question so you can return to it later.</p>
<p>Another powerful geometrical object is geom_boxplot(). This creates a ‚Äúbox-and-whisker‚Äù plot that illustrates the distribution of values within categories.</p>
<p>For example, let‚Äôs visualize how life expectancy varies by continent:</p>
<p>Run the code and take a look.</p>
<!-- Pause for effect. -->
<p>The box represents the interquartile range‚Äîthe middle 50% of data‚Äîwhile the line inside the box marks the median. The ‚Äúwhiskers‚Äù extend to show the 95% confidence interval, and any points outside this range are plotted as individual outliers.</p>
<p>Now, wouldn‚Äôt it be great to combine this boxplot with our jittered points from earlier? This would help us see both the overall distribution and the outliers more clearly. Let‚Äôs layer them together:</p>
<!-- Pause for effect. -->
<p>Looks great, doesn‚Äôt it? But notice something‚Äîthere‚Äôs some duplication in our code. We had to repeat the same mappings for both geom_jitter and geom_boxplot. That‚Äôs fine for now, but it can become cumbersome as your visualizations grow more complex.</p>
<p>Here‚Äôs a trick to make your code cleaner: you can move shared mappings to the parent ggplot() function. This way, every layer will ‚Äúinherit‚Äù these mappings automatically:</p>
<p>See? No more repeating yourself! You can still add layer-specific settings or arguments within individual geom_ functions if needed.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>When building complex plots, start by adding one layer at a time. Once you‚Äôve got the basic structure, move any common arguments up to the <code>ggplot()</code> function. This keeps your code tidy and easier to read.</p>
</div>
</div>
<p>Great job so far! In the next lesson, we‚Äôll explore even more ways to enhance your visualizations. See you there!</p>
</section>
<section id="video-9-greenscreen-12-min" class="level1">
<h1>VIDEO 9 {greenscreen} ~ 12 min</h1>
<!-- ## Trend lines -->
<p>Welcome back! Now, let‚Äôs take a closer look at the relationship between GDP per capita and life expectancy.</p>
<p>At first glance, life expectancy seems to improve as countries get richer. But is this relationship consistent across continents? Let‚Äôs find out by adding trend lines to our plot.</p>
<p>Trends are essentially linear regression lines. You might remember them from school‚Äîthey represent the best-fit line through your data. Here‚Äôs how we can add them to highlight differences in this relationship by continent:</p>
<p>Take a moment to run the code and see the result.</p>
<!-- Pause for effect. -->
<p>What do you observe? By default, geom_smooth() creates a regression line for each continent, and plotnine even adds confidence intervals‚Äîthose shaded gray areas around the lines. These intervals give us an idea of how well the model fits the data.</p>
<p>We also used the alpha argument to make our points semi-transparent. Why? It reduces visual clutter and lets the trend lines stand out more. Did you know that transparency can also be mapped to a variable? That‚Äôs right‚Äîjust like color or size, you can use alpha as a mapping aesthetic to make transparency vary based on your data. Try experimenting with that later!</p>
<p>Here‚Äôs a task for you: Modify the code we just used so that instead of creating separate regression lines for each continent, plotnine creates a single trend line for all data points.</p>
<p>Here‚Äôs the code to start with:</p>
<!-- :::{.challenge}
Create a single regression line for all data points modifying this sample code
```
(
ggplot(gapminder, mapping = aes(x='gdpPercap', y='lifeExp', color='continent'))+
geom_point(alpha=0.5)+
geom_smooth(method='lm')+
scale_x_log10()
)
```
::: -->
<p>Take a moment to think about it. How can you combine the points colored by continent with a single global regression line?</p>
<p>There‚Äôs more than one way to solve this problem‚Äîsee what you can come up with!</p>
<p>Did you find this challenge hard? It‚Äôs ok! Let‚Äôs step through it together!</p>
<p>In our previous example, we declared all the mappings‚Äîx, y, and color‚Äîat the global level, in the ggplot() function. This means that every layer inherited these mappings. While this works well for most situations, it‚Äôs not what we need here.</p>
<p>To build a single trend line for all data points, we must ensure that the color aesthetic applies only to the points and not to the trend line. How do we do that? By moving the color mapping from the global level into the geom_point() function.</p>
<p>Here‚Äôs how the updated code looks:</p>
<p>By moving the color aesthetic into geom_point(), it now affects only the points layer. Notice that it‚Äôs still wrapped in the aes() function because it remains a data-linked property. Meanwhile, the trend line‚Äîadded by geom_smooth()‚Äîinherits only the global mappings for x and y. This creates a single linear model across all continents, as we wanted.</p>
<p>Take a moment to observe how this subtle adjustment changes the visualization and makes the trend line easier to interpret.</p>
<p>Some of you might have come up with an alternative solution. Instead of changing the color aesthetic‚Äôs scope, we can override it directly within the geom_smooth() layer. In this case, the color aesthetic remains global, but we specify a non-data-linked property for the trend line, such as making it black:</p>
<p>Here, <code>geom_smooth()</code> ignores the global color aesthetic and instead applies the color black uniformly to the trend line. The result? A single black trend line stands out clearly, while the points remain color-coded by continent.</p>
<p>Both approaches work well, and the choice depends on how you want to structure your code and highlight different layers. Managing global and layer-specific mappings is a powerful feature in plotnine that gives you flexibility in creating clean, insightful plots.</p>
</section>
<section id="video-10-greenscreen-5-min" class="level1">
<h1>VIDEO 10 {greenscreen} ~ 5 min</h1>
<!-- ## Factors -->
<p>Do you want to learn a nifty trick that can improve your data visualization? This method can be useful when you want to visualize a continuous variable which has a limited number of distinct values.</p>
<p>Imagine we‚Äôre working with <code>year</code>, which is technically a continuous variable. But for some visualizations it might make more sense to treat each year as a separate category. How do we do that without modifying the data?</p>
<p>Simple! Instead of referencing year as a string (<code>'year'</code>), wrap it in <code>factor()</code>, like this <code>'factor(year)'</code>. This shorthand plotnine function converts a continuous variable into a categorical one on the fly, with each distinct value treated as its own category.</p>
<p>Let‚Äôs put this into practice with a couple of challenges!</p>
<p>Create a boxplot of life expectancy over time, treating year as a categorical variable. Using this plot, can you detect when the interquartile range of life expectancy‚Äîthe middle 50% of values‚Äîwas the smallest?</p>
<p>Then apply the same concept to gdpPercap.</p>
<p>Create a boxplot of GDP per capita by year, but this time keep it on a logarithmic scale. Remember that we used the scale_y_log10() function to make the data easier to interpret. Compare the interquartile range of GDP per capita in 2007 with that in 1952. Is the world today more or less diverse in terms of economic inequality?</p>
<div class="callout callout-style-default callout-challenge callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Challenge
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Make a boxplot of life expectancy by year. When was interquartile range of life expectancy the smallest?</li>
<li>Make the same plot of gdpPercap (on a log scale) per year. Is the world today more or less diverse than in 1952?</li>
</ul>
</div>
</div>
<p>Go ahead and give it a try. Pause the video and come back once you have your answer!</p>
<p>Looking at these two plots, you might notice a fascinating pattern.</p>
<p>You‚Äôre absolutely right: economic inequality has grown in the recent decades. In 1952, the world was much poorer, but there was a greater sense of uniformity across nations. By 2007, while the world is significantly wealthier on average, the disparities have widened.</p>
<p>And those outliers? Intriguing, aren‚Äôt they? Three countries stand apart from the rest in the 1952. Which ones could they be? We‚Äôll revisit these mysteries after diving into data wrangling techniques.</p>
<p>Great work on these challenges! These exercises show the power of visualizing data in different ways and how little tricks like factor() can make your plots much clearer. Next, we‚Äôll explore other types of plots that can uncover even more insights. Stay tuned, and I‚Äôll see you in the next lesson!</p>
</section>
<section id="video-11-greenscreen-12-min" class="level1">
<h1>VIDEO 11 {greenscreen} ~ 12 min</h1>
<!-- ## More geoms -->
<p>By now, you‚Äôve learned so much about using plotnine to create insightful visualizations. But we‚Äôve barely scratched the surface!</p>
<p>One of the most exciting features of plotnine is the sheer variety of geoms‚Äîthe building blocks for visualizing data. Start typing geom_ in your code editor, and you‚Äôll see a list of options pop up. It‚Äôs like a treasure chest of possibilities, and each geom offers a unique perspective on your data.</p>
<p>Let‚Äôs put your skills to the test with a few new challenges!</p>
<p>Histograms are perfect for exploring the distribution of a single variable. Let‚Äôs start with life expectancy. Create a histogram and observe the shape of the distribution. How many peaks‚Äîor modes‚Äîdoes it have? Play around with the <code>bins</code> parameter. Adjusting the number of bins changes the granularity of your histogram, which can affect how you interpret the distribution. What value of bins seems reasonable to you?</p>
<div class="callout callout-style-default callout-challenge callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Challenge
</div>
</div>
<div class="callout-body-container callout-body">
<p>Make a histogram of life expectancy. What is the shape of the distribution? How many modes (peaks) does the distribution of life expectancy have? What value of the <code>bins</code> parameter look reasonable?</p>
</div>
</div>
<p>Next up: density plots. These are smoothed-out versions of histograms, showing the probability distribution of your data.</p>
<p>Create a simple density plot for life expectancy. You can do it! Start typing and you will find the function you need. Do you see it? What if you want to compare distributions across continents? Add a color aesthetic.</p>
<div class="callout callout-style-default callout-challenge callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Challenge
</div>
</div>
<div class="callout-body-container callout-body">
<p>Build a density function. How would you compare density functions of different continents?</p>
</div>
</div>
<p>Right! You can split the data by continent by adding a color aesthetic and linking it to the variable <code>continent</code>. Or take it one step further! Use the <code>fill</code> aesthetic (in addition to color) to fill the areas under the curves. Add some transparency with <code>alpha</code> for a cleaner visualization like this:</p>
<p>These plots help us see how life expectancy varies not just overall, but also within each continent. Notice any interesting patterns? What might explain the peaks‚Äîor modes‚Äîyou see in the distributions?</p>
<p>Now let‚Äôs level up with 2D density plots. These are excellent for visualizing relationships between two variables. Start by creating a density plot of log GDP per capita vs.&nbsp;life expectancy (use geom_density_2d() function):</p>
<div class="callout callout-style-default callout-challenge callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Challenge
</div>
</div>
<div class="callout-body-container callout-body">
<p>Build a graph using <code>geom_density2d()</code> for log GDP per capita vs life expectancy. How many clusters of datapoints can you identify? What if you look at it by continent?</p>
</div>
</div>
<p>What do you see? Notice the two distinct clusters? One cluster represents countries that are poorer and have lower life expectancy, while the other includes those that are wealthier and healthier.</p>
<p>Now let‚Äôs break it down by continent.</p>
<!-- :::{.challenge}
Add a color aesthetic to see how regions of the world are distributed
::: -->
<p>Isn‚Äôt that fascinating? The lower cluster is primarily made up of African countries, while the higher cluster mostly includes Europe and Oceania. Asia? It‚Äôs scattered across both clusters, reflecting its diversity in economic and health outcomes. These exercises highlight the flexibility and power of plotnine. Whether it‚Äôs histograms, density plots, or advanced 2D density visualizations, each plot adds a new layer of understanding to your data.</p>
</section>
<section id="video-12-greenscreen-10-min" class="level1">
<h1>VIDEO 12 {greenscreen} ~ 10 min</h1>
<!-- ## Faceting -->
<p>When your graph starts to feel a bit too crowded‚Äîperhaps with too many layers or overlapping aesthetics‚Äîthere‚Äôs a simple solution: faceting. Faceting allows you to split your data into separate panels, creating multiple similar graphs for subsets of your data. This can make complex trends easier to spot and comparisons much clearer.</p>
<p>In plotnine, faceting is incredibly easy to use. Let‚Äôs revisit one of our earlier graphs and apply faceting to organize it by continent.</p>
<p>Here‚Äôs what‚Äôs happening:</p>
<ul>
<li><code>facet_wrap('continent')</code> instructs plotnine to create a separate panel for each unique value in the continent column.</li>
<li>Panels are arranged from left to right, and when they don‚Äôt fit on one row, they ‚Äúwrap‚Äù onto the next line.</li>
</ul>
<p>The result? A clean, organized set of charts where each panel highlights the GDP-per-capita and life expectancy trends for a specific continent. Faceting is especially helpful when the number of panels is manageable, and it lets us compare trends within each group side by side.</p>
<p>Let‚Äôs take this idea further. What happens to the relationship between GDP per capita and life expectancy over time?</p>
<p>Try faceting by year instead of continent.See if you can answer these questions</p>
<div class="callout callout-style-default callout-question callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Question
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Do the slopes of the trend lines change over the years?</li>
<li>How does the clustering of data points evolve as time progresses?</li>
</ul>
</div>
</div>
<p>This exercise offers an incredible opportunity to see how historical events, global growth, and inequality have shaped the world over decades.</p>
<!-- :::{.challenge}
Facet the following plot by year, keeping the linear smoother. You can edit this sample code
```
(
ggplot(gapminder, mapping = aes(x = 'gdpPercap', y = 'lifeExp')) +
  geom_point() +
  geom_smooth(color='blue') +
  scale_x_log10() + 
  facet_wrap('continent')
)
```
::: -->
<p>With everything we‚Äôve learned so far, we can summarize the plotnine template as follows::</p>
<!-- 
```
(
ggplot(<DATA>) + 
  <GEOM_FUNCTION>(mapping = aes(<MAPPINGS>)) + 
  <SCALE_FUNCTION> +
  <FACET_FUNCTION>
)
``` 
-->
<p>Faceting is a powerful addition to your visualization toolkit, especially when your data has distinct groups or categories. Whether you‚Äôre analyzing trends over continents or time, faceting can make your insights clearer and more impactful.</p>
<p>So, go ahead‚Äîtry faceting your own graphs. You‚Äôll be amazed at what you uncover!</p>
</section>
<section id="video-13-greenscreen-7-min" class="level1">
<h1>VIDEO 13 {greenscreen} ~ 7 min</h1>
<!-- ## Labeling and styling the chart -->
<p>We‚Äôve built our chart layer by layer, and now it‚Äôs time to refine it for presentation‚Äîwhether for your boss, a client, or publication. The final touches, like annotations and labels, can make all the difference in ensuring your audience understands your insights clearly.</p>
<p>Let‚Äôs start with some practical data transformations. Instead of showing GDP per capita in raw numbers, wouldn‚Äôt it be better to express it in thousands of dollars? Similarly, population is easier to interpret when expressed in millions.</p>
<p>With plotnine, we don‚Äôt need to preprocess our data for this. You can specify transformations directly in your chart code. For example <code>gdpPercap/1e3</code> divides GDP per capita by 1,000, and uses scientific notation (1e3) for convenience. Similarly, you can use <code>pop/1e6</code> to show population in millions.</p>
<p>To make our chart clear and professional, we‚Äôll use the labs() function. This function gathers all labels in one place, allowing us to customize:</p>
<ul>
<li>Title and subtitle at the top,</li>
<li>Caption at the bottom,</li>
<li>Labels for x, y, and any mapped aesthetics, like color or size.</li>
</ul>
<p>Here‚Äôs an example of a polished, annotated chart:</p>
<p>Each label corresponds to the aesthetics used in the aes() mappings. Make sure all mapped aesthetics are labeled, even if they appear in just one layer.</p>
<p>Now, let‚Äôs make your chart stand out! plotnine offers pre-selected themes that adjust the colors, fonts, and overall style of your plots.</p>
<p>One of my favorites is <code>theme_minimal()</code>. It simplifies the design, creating a clean and modern look:</p>
<p>plotnine offers plenty of built-in themes to match your purpose:</p>
<ul>
<li>theme_dark() for a sleek, high-contrast look.</li>
<li>theme_linedraw() for a simple, hand-drawn aesthetic.</li>
<li>theme_xkcd() for a playful, comic-style appearance.</li>
<li>theme_538() for a polished, professional newsroom feel.</li>
</ul>
<p>Themes contributed by the community can add even more variety. So, explore, experiment, and find the one that best suits your data story.</p>
<p>Congratulations! You‚Äôve learned about aesthetics, scales, different types of geoms and now you also know how to annotate and apply themes to your visuals to make them more compelling. With these skills, you‚Äôre ready to create polished, professional-quality charts that truly stand out.</p>
<p>Good luck, and we can‚Äôt wait to see the insights you‚Äôll uncover!</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
          // default icon
          link.classList.add("external");
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Lund University</p>
</div>   
    <div class="nav-footer-center">
<p>Data Literacy with Python</p>
</div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
 Follow us on  
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/lunduniversity">
      <i class="bi bi-twitter" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.instagram.com/lunduniversity/">
      <i class="bi bi-instagram" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/school/lunduniversity/">
      <i class="bi bi-linkedin" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.youtube.com/user/LundUniversity">
      <i class="bi bi-youtube" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.facebook.com/lunduniversity">
      <i class="bi bi-facebook" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>